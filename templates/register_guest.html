{% extends "base.html" %}

{% block title %}Register as Guest{% endblock %}

{% block csrf_token %}
    {{ csrf_token() }}
{% endblock %}

{% block content %}
<section class="register-guest">
    <!-- Page heading -->
    <h1>Register as Guest</h1>
    {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert {{ category }}" role="alert">{{ message }}</div>
            {% endfor %}
        {% endif %}
    {% endwith %}
    <!-- Guest upload form -->
    <form method="POST" enctype="multipart/form-data" novalidate>
        {{ csrf_token() }}
        <!-- Image upload and preview -->
        <div class="card">
            <h2>Upload Image</h2>
            <div class="form-group">
                <label for="image_file">Artwork File *</label>
                <input id="image_file" name="image_file" type="file" accept=".png,.jpg,.jpeg" class="input" aria-label="Artwork file" required>
            </div>
            <div class="preview-box" aria-live="polite"></div>
        </div>

        <!-- Basic artwork details -->
        <div class="card">
            <h2>Details</h2>
            <div class="form-group">
                <label for="title">Title *</label>
                <input id="title" name="title" type="text" class="input" aria-label="Artwork title" required>
            </div>
            <div class="form-group">
                <label for="creator_name">Creator Name</label>
                <input id="creator_name" name="creator_name" type="text" class="input" aria-label="Creator name">
            </div>
        </div>

        <!-- Optional watermark settings -->
        <div class="card">
            <h2>Watermark</h2>
            <div class="form-group">
                <label for="watermark_text">Watermark Text</label>
                <input id="watermark_text" name="watermark_text" type="text" class="input" aria-label="Watermark text">
            </div>
            <div class="form-group">
                <label for="watermark_position">Watermark Position</label>
                <select id="watermark_position" name="watermark_position" class="select" aria-label="Watermark position">
                    <option value="top-left">Top Left</option>
                    <option value="top-right">Top Right</option>
                    <option value="center">Center</option>
                    <option value="bottom-left">Bottom Left</option>
                    <option value="bottom-right">Bottom Right</option>
                </select>
            </div>
            <div class="form-group">
                <label for="watermark_color">Watermark Color</label>
                <input id="watermark_color" name="watermark_color" type="color" class="input" aria-label="Watermark color" value="#ffffff">
            </div>
        </div>

        <!-- CAPTCHA challenge placeholder -->
        <div class="captcha">[CAPTCHA placeholder]</div>

        <!-- Submit button -->
        <div class="form-group">
            <button type="submit" class="btn">Register and Download Proof</button>
        </div>
    </form>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}