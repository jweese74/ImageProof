{% extends "base.html" %}

{% block title %}Register New Image{% endblock %}

{% block csrf_token %}{% endblock %}

{% block content %}
<section class="register-image">
    <h1>Register New Image</h1>
    <form method="POST" enctype="multipart/form-data" action="{{ url_for('register_image_member') }}" onsubmit="return confirm('You will not be able to retrieve this original image later.');" novalidate>
        {{ csrf_field() }}
        <!-- Image Upload Section -->
        <div class="card">
            <h2>Upload Image</h2>
            <div class="form-group">
                <label for="original_image">Artwork File *</label>
                <input id="original_image" name="original_image" type="file" accept=".png,.jpg,.jpeg" class="input" aria-label="Original image upload" required>
            </div>
            <div id="image-preview" class="watermark-preview" aria-live="polite"></div>
        </div>

        <!-- Metadata Section -->
        <div class="card">
            <h2>Metadata</h2>
            <div class="form-group">
                <label for="title">Title *</label>
                <input id="title" name="title" type="text" class="input" aria-label="Image title" required>
            </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea id="description" name="description" class="textarea" aria-label="Image description"></textarea>
            </div>
            <div class="form-group">
                <label for="creation_date">Creation Date</label>
                <input id="creation_date" name="creation_date" type="date" class="input" aria-label="Creation date">
            </div>
@@ -83,26 +81,26 @@
            <div class="form-group">
                <label for="signature_image">Signature Image (PNG)</label>
                <input id="signature_image" name="signature_image" type="file" accept="image/png" class="input" aria-label="Signature image">
            </div>
            <div class="form-group">
                <label for="watermark_image">Watermark Image</label>
                <input id="watermark_image" name="watermark_image" type="file" accept="image/png" class="input" aria-label="Watermark image">
            </div>
            <div class="form-group">
                <button type="button" class="btn" id="preview-button" aria-label="Preview with overlays">Preview</button>
            </div>
        </div>

        <!-- Security Section -->
        {{ render_captcha() }}

        <div class="form-group">
            <button type="submit" class="btn">Register Image</button>
        </div>
    </form>
</section>
{% endblock %}

{% block scripts %}
{{ super() }}
{% endblock %}